<section class="hero" id="galeria">
  <div class="hero-carousel">
    <div class="track" id="hero-track"></div>
    <button class="arrow prev" aria-label="Anterior">‹</button>
    <button class="arrow next" aria-label="Siguiente">›</button>
    <div class="dots" id="hero-dots"></div>
  </div>

  <div class="hero-content">
    <h2>Impresión 3D de calidad</h2>
    <p>Diseñamos y fabricamos objetos únicos.</p>
    <a href="#contacto" class="cta">Contactanos</a>
  </div>
</section>
<script>
(async function(){
  const username="argentex2000-byte", repo="Argentex", folder="fondo";
  const api=`https://api.github.com/repos/${username}/${repo}/contents/${folder}`;
  const hero=document.querySelector('.hero');
  const track=hero.querySelector('#hero-track');
  const dots=hero.querySelector('#hero-dots');
  const prev=hero.querySelector('.arrow.prev');
  const next=hero.querySelector('.arrow.next');

  const res=await fetch(api); const files=await res.json();
  const images=files.filter(f=>/\.(jpg|jpeg|png|webp)$/i.test(f.name));

  images.forEach(f=>{
    const img=document.createElement('img');
    img.className='slide';
    img.src=`https://raw.githubusercontent.com/${username}/${repo}/main/${folder}/${f.name}`;
    track.appendChild(img);
  });

  const slides=[...track.querySelectorAll('.slide')];
  if(!slides.length) return;

  let i=0, timer, AUTOPLAY=3500;
  slides.forEach((_,idx)=>{ const b=document.createElement('button'); b.onclick=()=>go(idx,true); dots.appendChild(b); });

  const update=()=>{ track.style.transform=`translateX(-${i*100}%)`; [...dots.children].forEach((b,idx)=>b.classList.toggle('active',idx===i)); };
  const go=(idx,user=false)=>{ i=(idx+slides.length)%slides.length; update(); if(user) restart(); };
  const nextFn=()=>go(i+1), prevFn=()=>go(i-1,true);
  prev.onclick=prevFn; next.onclick=()=>go(i+1,true);
  const start=()=>{ stop(); timer=setInterval(nextFn,AUTOPLAY); };
  const stop =()=>{ if(timer) clearInterval(timer); };
  const restart=()=>start();
  hero.addEventListener('mouseenter',stop); hero.addEventListener('mouseleave',start);

  update(); start();
})();
</script>
